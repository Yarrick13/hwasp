n(11).

value(0).
value(X) :- value(Y), X=Y+1, X<N, n(N).

% guess horizontal position for each row
q(X,1) :- value(X), not q(X,2), not q(X,3), not q(X,4), not q(X,5), not q(X,6), not q(X,7), not q(X,8), not q(X,9), not q(X,10), not q(X,11).
q(X,2) :- value(X), not q(X,1), not q(X,3), not q(X,4), not q(X,5), not q(X,6), not q(X,7), not q(X,8), not q(X,9), not q(X,10), not q(X,11).
q(X,3) :- value(X), not q(X,1), not q(X,2), not q(X,4), not q(X,5), not q(X,6), not q(X,7), not q(X,8), not q(X,9), not q(X,10), not q(X,11).
q(X,4) :- value(X), not q(X,1), not q(X,2), not q(X,3), not q(X,5), not q(X,6), not q(X,7), not q(X,8), not q(X,9), not q(X,10), not q(X,11).
q(X,5) :- value(X), not q(X,1), not q(X,2), not q(X,3), not q(X,4), not q(X,6), not q(X,7), not q(X,8), not q(X,9), not q(X,10), not q(X,11).
q(X,6) :- value(X), not q(X,1), not q(X,2), not q(X,3), not q(X,4), not q(X,5), not q(X,7), not q(X,8), not q(X,9), not q(X,10), not q(X,11).
q(X,7) :- value(X), not q(X,1), not q(X,2), not q(X,3), not q(X,4), not q(X,5), not q(X,6), not q(X,8), not q(X,9), not q(X,10), not q(X,11).
q(X,8) :- value(X), not q(X,1), not q(X,2), not q(X,3), not q(X,4), not q(X,5), not q(X,6), not q(X,7), not q(X,9), not q(X,10), not q(X,11).
q(X,9) :- value(X), not q(X,1), not q(X,2), not q(X,3), not q(X,4), not q(X,5), not q(X,6), not q(X,7), not q(X,8), not q(X,10), not q(X,11).
q(X,10) :- value(X), not q(X,1), not q(X,2), not q(X,3), not q(X,4), not q(X,5), not q(X,6), not q(X,7), not q(X,8), not q(X,9), not q(X,11).
q(X,11) :- value(X), not q(X,1), not q(X,2), not q(X,3), not q(X,4), not q(X,5), not q(X,6), not q(X,7), not q(X,8), not q(X,9), not q(X,10).

% check

% assert that each column may only contain (at most) one q
:- q(X1,Y), q(X2,Y), X1 != X2.

% assert that no two qs are in a diagonal from top left to bottom right
:- q(X1,Y1), q(X2,Y2), N=X2-X1, N=Y2-Y1, N > 0.

% assert that no two qs are in a diagonal from top right to bottom left
:- q(X1,Y1), q(X2,Y2), N=X2-X1, N=Y1-Y2, N > 0.
